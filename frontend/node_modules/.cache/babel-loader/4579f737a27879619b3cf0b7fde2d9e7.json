{"ast":null,"code":"var _jsxFileName = \"F:\\\\KitMelk\\\\weblog-rj-1401-10-10\\\\src\\\\containers\\\\Toplearn.jsx\";\nimport React, { useEffect } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport Course from \"../components/Course/Course\";\nimport MainLayout from \"../components/Layouts/MainLayout\";\nimport UserContext from \"../components/context/userContext\";\nimport Login from \"../components/Login/Login\";\nimport Register from \"./../components/Register/Register\";\nimport Archive from \"./../components/Course/Archive\";\nimport SingleCourse from \"./../components/Course/SingleCourse\";\nimport UserProfile from \"./../components/Profile/UserProfile\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { paginate } from \"./../utils/paginate\";\nimport { addUser, clearUser } from \"./../actions/user\";\nimport { decodeToken } from \"./../utils/decodeToken\";\nimport Logout from \"./../components/Login/Logout\";\nimport { isEmpty } from \"lodash\";\nimport NotFound from \"./../components/common/NotFound\";\n\nconst Toplearn = () => {\n  const courses = useSelector(state => state.courses);\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const indexCourses = paginate(courses, 1, 8);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      const decodedToken = decodeToken(token);\n      const dateNow = Date.now() / 1000;\n\n      if (decodedToken.payload.exp < dateNow) {\n        localStorage.removeItem(\"token\");\n        dispatch(clearUser());\n      } else dispatch(addUser(decodedToken.payload.user));\n    }\n  }, []);\n  return React.createElement(MainLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/login\",\n    render: () => isEmpty(user) ? React.createElement(UserContext, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(Login, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/logout\",\n    render: () => isEmpty(user) ? React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }) : React.createElement(Logout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/register\",\n    render: () => isEmpty(user) ? React.createElement(UserContext, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Register, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/archive\",\n    component: Archive,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/course/:id\",\n    component: SingleCourse,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/user-profile\",\n    component: UserProfile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/\",\n    exact: true,\n    render: () => React.createElement(Course, {\n      courses: indexCourses,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"*\",\n    exact: true,\n    component: NotFound,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })));\n};\n\nexport default Toplearn;","map":{"version":3,"sources":["F:/KitMelk/weblog-rj-1401-10-10/src/containers/Toplearn.jsx"],"names":["React","useEffect","Switch","Route","Redirect","Course","MainLayout","UserContext","Login","Register","Archive","SingleCourse","UserProfile","useSelector","useDispatch","paginate","addUser","clearUser","decodeToken","Logout","isEmpty","NotFound","Toplearn","courses","state","user","dispatch","indexCourses","token","localStorage","getItem","decodedToken","dateNow","Date","now","payload","exp","removeItem"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\n\r\nimport Course from \"../components/Course/Course\";\r\nimport MainLayout from \"../components/Layouts/MainLayout\";\r\nimport UserContext from \"../components/context/userContext\";\r\nimport Login from \"../components/Login/Login\";\r\nimport Register from \"./../components/Register/Register\";\r\nimport Archive from \"./../components/Course/Archive\";\r\nimport SingleCourse from \"./../components/Course/SingleCourse\";\r\nimport UserProfile from \"./../components/Profile/UserProfile\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { paginate } from \"./../utils/paginate\";\r\nimport { addUser, clearUser } from \"./../actions/user\";\r\nimport { decodeToken } from \"./../utils/decodeToken\";\r\nimport Logout from \"./../components/Login/Logout\";\r\nimport { isEmpty } from \"lodash\";\r\nimport NotFound from \"./../components/common/NotFound\";\r\n\r\nconst Toplearn = () => {\r\n    const courses = useSelector(state => state.courses);\r\n    const user = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n\r\n    const indexCourses = paginate(courses, 1, 8);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            const decodedToken = decodeToken(token);\r\n            const dateNow = Date.now() / 1000;\r\n\r\n            if (decodedToken.payload.exp < dateNow) {\r\n                localStorage.removeItem(\"token\");\r\n                dispatch(clearUser());\r\n            } else dispatch(addUser(decodedToken.payload.user));\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <MainLayout>\r\n            <Switch>\r\n                <Route\r\n                    path=\"/login\"\r\n                    render={() =>\r\n                        isEmpty(user) ? (\r\n                            <UserContext>\r\n                                <Login />\r\n                            </UserContext>\r\n                        ) : (\r\n                            <Redirect to=\"/\" />\r\n                        )\r\n                    }\r\n                />\r\n                <Route\r\n                    path=\"/logout\"\r\n                    render={() =>\r\n                        isEmpty(user) ? <Redirect to=\"/\" /> : <Logout />\r\n                    }\r\n                />\r\n                <Route\r\n                    path=\"/register\"\r\n                    render={() =>\r\n                        isEmpty(user) ? (\r\n                            <UserContext>\r\n                                <Register />\r\n                            </UserContext>\r\n                        ) : (\r\n                            <Redirect to=\"/\" />\r\n                        )\r\n                    }\r\n                />\r\n                <Route path=\"/archive\" component={Archive} />\r\n                <Route path=\"/course/:id\" component={SingleCourse} />\r\n                <Route path=\"/user-profile\" component={UserProfile} />\r\n                <Route\r\n                    path=\"/\"\r\n                    exact\r\n                    render={() => <Course courses={indexCourses} />}\r\n                />\r\n                {/* <Route component={NotFound} /> */}\r\n                <Route path=\"*\" exact component={NotFound} />\r\n            </Switch>\r\n        </MainLayout>\r\n    );\r\n};\r\n\r\nexport default Toplearn;\r\n"]},"metadata":{},"sourceType":"module"}